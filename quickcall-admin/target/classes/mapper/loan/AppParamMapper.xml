<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AppParam">

    <resultMap type="AppParam" id="appParamMap">
        <id column="sys_param_id" property="sysParamId"/>
        <result column="sys_param_value" property="sysParamValue"/>
        <result column="sys_param_name" property="sysParamName"/>
        <result column="sys_param_code" property="sysParamCode"/>
        <result column="state" property="state"/>
        <result column="create_time" property="createTime"/>
        <result column="create_man" property="createMan"/>
        <result column="modify_time" property="modifyTime"/>
        <result column="modify_man" property="modifyMan"/>
        <result column="remark" property="remark"/>
    </resultMap>

    <sql id="Base_Column_List">
          sys_param_id,
          sys_param_value,
          sys_param_name,
          sys_param_code,
          state,
          DATE_FORMAT(
            create_time,
            '%Y-%c-%d %H:%i:%s'
          ) as create_time,
          create_man,
          DATE_FORMAT(
            modify_time,
            '%Y-%c-%d %H:%i:%s'
          ) AS modify_time,
          modify_man,
          remark
    </sql>

    <select id="get" parameterType="map" resultMap="appParamMap">
        select
        <include refid="Base_Column_List"/>
        from sys_app_param
        WHERE sys_param_code = #{sysParamCode}
        and state = 1
    </select>

    <insert id="insert" parameterType="map">
        insert into sys_app_param(sys_param_id, sys_param_value, sys_param_name,sys_param_code, state, create_time,create_man, modify_time, modify_man,remark)
        values (#{sysParamId}, #{sysParamValue,},#{sysParamName},#{sysParamCode}, #{state}, #{createTime},#{createMan}, #{modifyTime}, #{modifyMan},#{remark})
    </insert>

    <select id="queryCount" parameterType="map" resultType="int">
        select count(sys_param_id) from sys_app_param where 1=1
        <if test="state !=null">and state like concat('%',#{state},'%')</if>
    </select>
    <select id="query" parameterType="map" resultMap="appParamMap">
        select
        <include refid="Base_Column_List"/>
        from
        sys_app_param where 1=1
        <if test="state !=null">and state like concat('%',#{state},'%')</if>
        limit ${iDisplayStart},${iDisplayLength}
    </select>

    <select id="getAppParamById" parameterType="map" resultMap="appParamMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM sys_app_param
        WHERE sys_param_id = #{arg0}
    </select>

    <delete id="delete" parameterType="map">
        DELETE FROM sys_app_param
        WHERE
        sys_param_id = #{arg0}
    </delete>

    <update id="update" parameterType="map">
        update sys_app_param
        <set>
            <if test="sysParamValue != null">
                sys_param_value = #{sysParamValue},
            </if>
            <if test="sysParamName != null">
                sys_param_name = #{sysParamName},
            </if>
            <if test="sysParamCode != null">
                sys_param_code = #{sysParamCode},
            </if>
            <if test="state != null">
                state = #{state},
            </if>
            <if test="createTime != null">
                create_time = #{createTime},
            </if>
            <if test="createMan != null">
                create_man = #{createMan},
            </if>
            <if test="modifyTime != null">
                modify_time = #{modifyTime},
            </if>
            <if test="modifyMan != null">
                modify_man = #{modifyMan},
            </if>
            <if test="remark != null">
                remark = #{remark},
            </if>
        </set>
        WHERE sys_param_id = #{sysParamId}
    </update>

</mapper>