<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="BussProductModel">

	<resultMap type="BussProductModel" id="bussProductModelMap">
		<id property="id" column="id" javaType="java.lang.String"></id>
		<result property="modelType" column="model_type" javaType="java.lang.String"></result>
		<result property="modelContent" column="model_content" javaType="java.lang.String"></result>
		<result property="modelNo" column="model_no" javaType="java.lang.String"></result>
		<result property="createMan" column="create_man" javaType="java.lang.String"></result>
		<result property="modifyMan" column="modify_man" javaType="java.lang.String"></result>
		<result property="createTime" column="create_time" javaType="java.lang.String"></result>
		<result property="modifyTime" column="modify_time" javaType="java.lang.String"></result>
	</resultMap>

	<!-- 通用查询结果列-->
	<sql id="Base_Column_List">
id,	model_type,	model_content,	model_no,weight,	create_man,	modify_man,	create_time,	modify_time
	</sql>

	<!-- 查询（根据主键ID查询） -->
	<select id="getEntityById" resultMap="bussProductModelMap" parameterType="java.lang.String">
		 SELECT
		 <include refid="Base_Column_List" />
		 FROM buss_product_model
		 WHERE id = #{id}
	</select>

	<!-- 查询（根据主键ID查询） -->
	<select id="findAll" resultMap="bussProductModelMap" parameterType="java.lang.String">
		 SELECT
		 <include refid="Base_Column_List" />
		 FROM buss_product_model
		 WHERE id = #{id}
	</select>

	<!--删除：根据主键ID删除-->
	<delete id="deleteEntity" parameterType="java.lang.String">
		 DELETE FROM buss_product_model
		 WHERE id = #{id}
	</delete>

	<!-- 添加 -->
	<insert id="insert" parameterType="com.calf.module.bussiness.entity.BussProductModel">
		 INSERT INTO buss_product_model
 		(id,model_type,model_content,model_no,create_man,modify_man,create_time,modify_time,weight) 
		 VALUES 
 		(#{id},#{modelType},#{modelContent},#{modelNo},#{createMan},#{modifyMan},#{createTime},#{modifyTime},#{weight}) 
	</insert>

	<!-- 修 改-->
	<update id="update" parameterType="com.calf.module.bussiness.entity.BussProductModel">
		 UPDATE buss_product_model
 		 <set> 
			<if test="modelType != null">
				 model_type = #{modelType},
			</if>
			<if test="modelContent != null">
				 model_content = #{modelContent},
			</if>
			<if test="modelNo != null">
				 model_no = #{modelNo},
			</if>
			<if test="createMan != null">
				 create_man = #{createMan},
			</if>
			<if test="modifyMan != null">
				 modify_man = #{modifyMan},
			</if>
			<if test="createTime != null">
				 create_time = #{createTime},
			</if>
			<if test="modifyTime != null">
				 modify_time = #{modifyTime},
			</if>
			<if test="weight != null ">
				 weight = #{weight},
			</if>

 		 </set>
		 WHERE id = #{id}
	</update>
	<!--根据模块编号查询模块-->
	<select id="queryModelByCode" parameterType="map" resultMap="bussProductModelMap">
		SELECT
		<include refid="Base_Column_List" />
		FROM
		buss_product_model
		WHERE
		model_no = #{modelNo}
		ORDER BY
		weight DESC
	</select>

  <select id="query" parameterType="Map" resultMap="bussProductModelMap">
	select 
	<include refid="Base_Column_List" />
	 from buss_product_model where 1=1
	<if test="modelContent!=null and modelContent!=''">
	and  LOCATE(#{modelContent},model_content) <![CDATA[ > ]]> 0
	</if>
	<if test="modelNo!=null and modelNo!=''">
	and model_no=#{modelNo}
	</if>
      ORDER BY create_time DESC
      LIMIT  #{iDisplayStart},#{iDisplayLength}
   
	
	</select>
	
	<select id="queryCount" parameterType="Map" resultType="int">
	select count(id) from buss_product_model where 1=1
	<if test="modelContent!=null and modelContent!=''">
	and  LOCATE(#{modelContent},model_content) <![CDATA[ > ]]> 0
	</if>
	<if test="modelNo!=null and modelNo!=''">
	and model_no=#{modelNo}
	</if>
	
	</select>
	
	<select id="queryOne" parameterType="Map"  resultMap="bussProductModelMap">
	
	select  *from buss_product_model where id=#{arg0}
	
	</select>


    <select id="querybymodelNoAndmodelContent" parameterType="Map" resultMap="bussProductModelMap">
    select 
	<include refid="Base_Column_List" />
	 from buss_product_model
	 where model_no=#{modelNo}
	 and model_content=#{modelContent}
    </select>












</mapper>