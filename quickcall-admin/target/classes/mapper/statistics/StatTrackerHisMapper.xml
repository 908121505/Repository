<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="StatTrackerHis" >
  <resultMap id="BaseResultMap" type="com.calf.module.statistics.entity.StatTrackerHis" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    <id column="id" property="id" jdbcType="VARCHAR" />
    <result column="guid" property="guid" jdbcType="VARCHAR" />
    <result column="uid" property="uid" jdbcType="VARCHAR" />
    <result column="url" property="url" jdbcType="VARCHAR" />
    <result column="rfu" property="rfu" jdbcType="VARCHAR" />
    <result column="tp" property="tp" jdbcType="VARCHAR" />
    <result column="plt" property="plt" jdbcType="VARCHAR" />
    <result column="page_type_code" property="pageTypeCode" jdbcType="VARCHAR" />
    <result column="page_id" property="pageId" jdbcType="VARCHAR" />
    <result column="area_id" property="areaId" jdbcType="VARCHAR" />
    <result column="area_index" property="areaIndex" jdbcType="VARCHAR" />
    <result column="track_time" property="trackTime" jdbcType="TIMESTAMP" />
    <result column="channel_id" property="channelId" jdbcType="VARCHAR" />
    <result column="lat" property="lat" jdbcType="VARCHAR" />
    <result column="lng" property="lng" jdbcType="VARCHAR" />
    <result column="devicetype" property="devicetype" jdbcType="VARCHAR" />
    <result column="fromIP" property="fromip" jdbcType="VARCHAR" />
    <result column="app_market" property="appMarket" jdbcType="VARCHAR" />
    <result column="device_sys_version" property="deviceSysVersion" jdbcType="VARCHAR" />
    <result column="app_version" property="appVersion" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    id, guid, uid, url, rfu, tp, plt, page_type_code, page_id, area_id, area_index, track_time, 
    channel_id, lat, lng, devicetype, fromIP, app_market, device_sys_version, app_version
  </sql>
  
  
  
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.calf.module.statistics.entity.StatTrackerHis" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from stat_tracker_his
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from stat_tracker_his
    where id = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    delete from stat_tracker_his
    where id = #{id,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="com.calf.module.statistics.entity.StatTrackerHis" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    delete from stat_tracker_his
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.calf.module.statistics.entity.StatTrackerHis" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    insert into stat_tracker_his (id, guid, uid, 
      url, rfu, tp, plt, 
      page_type_code, page_id, area_id, 
      area_index, track_time, channel_id, 
      lat, lng, devicetype, 
      fromIP, app_market, device_sys_version, 
      app_version)
    values (#{id,jdbcType=VARCHAR}, #{guid,jdbcType=VARCHAR}, #{uid,jdbcType=VARCHAR}, 
      #{url,jdbcType=VARCHAR}, #{rfu,jdbcType=VARCHAR}, #{tp,jdbcType=VARCHAR}, #{plt,jdbcType=VARCHAR}, 
      #{pageTypeCode,jdbcType=VARCHAR}, #{pageId,jdbcType=VARCHAR}, #{areaId,jdbcType=VARCHAR}, 
      #{areaIndex,jdbcType=VARCHAR}, #{trackTime,jdbcType=TIMESTAMP}, #{channelId,jdbcType=VARCHAR}, 
      #{lat,jdbcType=VARCHAR}, #{lng,jdbcType=VARCHAR}, #{devicetype,jdbcType=VARCHAR}, 
      #{fromip,jdbcType=VARCHAR}, #{appMarket,jdbcType=VARCHAR}, #{deviceSysVersion,jdbcType=VARCHAR}, 
      #{appVersion,jdbcType=VARCHAR})
  </insert>
  
  <insert id="importData" parameterType="com.calf.module.statistics.entity.StatTrackerHis" >
  INSERT into `stat_tracker_his`  SELECT * FROM `stat_tracker`
   WHERE TO_DAYS( NOW( ) ) - TO_DAYS(track_time) = 1 ;
 
  </insert>
  
   <select id="queryInsertCount" resultType="int" parameterType="java.util.Map">
  	select count(1) from stat_tracker  WHERE date(track_time) = #{track_time}
   </select>

   <insert id="importStatTrackerData" parameterType="java.util.Map" >
 	 INSERT into stat_tracker_his SELECT * FROM stat_tracker WHERE date(track_time) = #{track_time} limit #{start}, #{pageSize}
   </insert>
  
   <delete id="deleteData" parameterType="map">
   	delete from stat_tracker where track_time &lt; date_sub(curdate(),interval 6 day) LIMIT  3000;
   </delete> 
   <delete id="deleteStatTrackerHisData">
   	delete from stat_tracker_his where track_time &lt; date_sub(curdate(),interval 7 day) LIMIT  3000;
   </delete> 
   <select id="queryCount" parameterType="map" resultType="int">
	select count(*) from stat_tracker WHERE track_time &lt; date_sub(curdate(),interval 6 day)
   </select>
  
   <insert id="insertSelective" parameterType="com.calf.module.statistics.entity.StatTrackerHis" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    insert into stat_tracker_his
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="guid != null" >
        guid,
      </if>
      <if test="uid != null" >
        uid,
      </if>
      <if test="url != null" >
        url,
      </if>
      <if test="rfu != null" >
        rfu,
      </if>
      <if test="tp != null" >
        tp,
      </if>
      <if test="plt != null" >
        plt,
      </if>
      <if test="pageTypeCode != null" >
        page_type_code,
      </if>
      <if test="pageId != null" >
        page_id,
      </if>
      <if test="areaId != null" >
        area_id,
      </if>
      <if test="areaIndex != null" >
        area_index,
      </if>
      <if test="trackTime != null" >
        track_time,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="lat != null" >
        lat,
      </if>
      <if test="lng != null" >
        lng,
      </if>
      <if test="devicetype != null" >
        devicetype,
      </if>
      <if test="fromip != null" >
        fromIP,
      </if>
      <if test="appMarket != null" >
        app_market,
      </if>
      <if test="deviceSysVersion != null" >
        device_sys_version,
      </if>
      <if test="appVersion != null" >
        app_version,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="guid != null" >
        #{guid,jdbcType=VARCHAR},
      </if>
      <if test="uid != null" >
        #{uid,jdbcType=VARCHAR},
      </if>
      <if test="url != null" >
        #{url,jdbcType=VARCHAR},
      </if>
      <if test="rfu != null" >
        #{rfu,jdbcType=VARCHAR},
      </if>
      <if test="tp != null" >
        #{tp,jdbcType=VARCHAR},
      </if>
      <if test="plt != null" >
        #{plt,jdbcType=VARCHAR},
      </if>
      <if test="pageTypeCode != null" >
        #{pageTypeCode,jdbcType=VARCHAR},
      </if>
      <if test="pageId != null" >
        #{pageId,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null" >
        #{areaId,jdbcType=VARCHAR},
      </if>
      <if test="areaIndex != null" >
        #{areaIndex,jdbcType=VARCHAR},
      </if>
      <if test="trackTime != null" >
        #{trackTime,jdbcType=TIMESTAMP},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="lat != null" >
        #{lat,jdbcType=VARCHAR},
      </if>
      <if test="lng != null" >
        #{lng,jdbcType=VARCHAR},
      </if>
      <if test="devicetype != null" >
        #{devicetype,jdbcType=VARCHAR},
      </if>
      <if test="fromip != null" >
        #{fromip,jdbcType=VARCHAR},
      </if>
      <if test="appMarket != null" >
        #{appMarket,jdbcType=VARCHAR},
      </if>
      <if test="deviceSysVersion != null" >
        #{deviceSysVersion,jdbcType=VARCHAR},
      </if>
      <if test="appVersion != null" >
        #{appVersion,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.calf.module.statistics.entity.StatTrackerHis" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    select count(*) from stat_tracker_his
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    update stat_tracker_his
    <set >
      <if test="record.id != null" >
        id = #{record.id,jdbcType=VARCHAR},
      </if>
      <if test="record.guid != null" >
        guid = #{record.guid,jdbcType=VARCHAR},
      </if>
      <if test="record.uid != null" >
        uid = #{record.uid,jdbcType=VARCHAR},
      </if>
      <if test="record.url != null" >
        url = #{record.url,jdbcType=VARCHAR},
      </if>
      <if test="record.rfu != null" >
        rfu = #{record.rfu,jdbcType=VARCHAR},
      </if>
      <if test="record.tp != null" >
        tp = #{record.tp,jdbcType=VARCHAR},
      </if>
      <if test="record.plt != null" >
        plt = #{record.plt,jdbcType=VARCHAR},
      </if>
      <if test="record.pageTypeCode != null" >
        page_type_code = #{record.pageTypeCode,jdbcType=VARCHAR},
      </if>
      <if test="record.pageId != null" >
        page_id = #{record.pageId,jdbcType=VARCHAR},
      </if>
      <if test="record.areaId != null" >
        area_id = #{record.areaId,jdbcType=VARCHAR},
      </if>
      <if test="record.areaIndex != null" >
        area_index = #{record.areaIndex,jdbcType=VARCHAR},
      </if>
      <if test="record.trackTime != null" >
        track_time = #{record.trackTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.channelId != null" >
        channel_id = #{record.channelId,jdbcType=VARCHAR},
      </if>
      <if test="record.lat != null" >
        lat = #{record.lat,jdbcType=VARCHAR},
      </if>
      <if test="record.lng != null" >
        lng = #{record.lng,jdbcType=VARCHAR},
      </if>
      <if test="record.devicetype != null" >
        devicetype = #{record.devicetype,jdbcType=VARCHAR},
      </if>
      <if test="record.fromip != null" >
        fromIP = #{record.fromip,jdbcType=VARCHAR},
      </if>
      <if test="record.appMarket != null" >
        app_market = #{record.appMarket,jdbcType=VARCHAR},
      </if>
      <if test="record.deviceSysVersion != null" >
        device_sys_version = #{record.deviceSysVersion,jdbcType=VARCHAR},
      </if>
      <if test="record.appVersion != null" >
        app_version = #{record.appVersion,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    update stat_tracker_his
    set id = #{record.id,jdbcType=VARCHAR},
      guid = #{record.guid,jdbcType=VARCHAR},
      uid = #{record.uid,jdbcType=VARCHAR},
      url = #{record.url,jdbcType=VARCHAR},
      rfu = #{record.rfu,jdbcType=VARCHAR},
      tp = #{record.tp,jdbcType=VARCHAR},
      plt = #{record.plt,jdbcType=VARCHAR},
      page_type_code = #{record.pageTypeCode,jdbcType=VARCHAR},
      page_id = #{record.pageId,jdbcType=VARCHAR},
      area_id = #{record.areaId,jdbcType=VARCHAR},
      area_index = #{record.areaIndex,jdbcType=VARCHAR},
      track_time = #{record.trackTime,jdbcType=TIMESTAMP},
      channel_id = #{record.channelId,jdbcType=VARCHAR},
      lat = #{record.lat,jdbcType=VARCHAR},
      lng = #{record.lng,jdbcType=VARCHAR},
      devicetype = #{record.devicetype,jdbcType=VARCHAR},
      fromIP = #{record.fromip,jdbcType=VARCHAR},
      app_market = #{record.appMarket,jdbcType=VARCHAR},
      device_sys_version = #{record.deviceSysVersion,jdbcType=VARCHAR},
      app_version = #{record.appVersion,jdbcType=VARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.calf.module.statistics.entity.StatTrackerHis" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    update stat_tracker_his
    <set >
      <if test="guid != null" >
        guid = #{guid,jdbcType=VARCHAR},
      </if>
      <if test="uid != null" >
        uid = #{uid,jdbcType=VARCHAR},
      </if>
      <if test="url != null" >
        url = #{url,jdbcType=VARCHAR},
      </if>
      <if test="rfu != null" >
        rfu = #{rfu,jdbcType=VARCHAR},
      </if>
      <if test="tp != null" >
        tp = #{tp,jdbcType=VARCHAR},
      </if>
      <if test="plt != null" >
        plt = #{plt,jdbcType=VARCHAR},
      </if>
      <if test="pageTypeCode != null" >
        page_type_code = #{pageTypeCode,jdbcType=VARCHAR},
      </if>
      <if test="pageId != null" >
        page_id = #{pageId,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null" >
        area_id = #{areaId,jdbcType=VARCHAR},
      </if>
      <if test="areaIndex != null" >
        area_index = #{areaIndex,jdbcType=VARCHAR},
      </if>
      <if test="trackTime != null" >
        track_time = #{trackTime,jdbcType=TIMESTAMP},
      </if>
      <if test="channelId != null" >
        channel_id = #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="lat != null" >
        lat = #{lat,jdbcType=VARCHAR},
      </if>
      <if test="lng != null" >
        lng = #{lng,jdbcType=VARCHAR},
      </if>
      <if test="devicetype != null" >
        devicetype = #{devicetype,jdbcType=VARCHAR},
      </if>
      <if test="fromip != null" >
        fromIP = #{fromip,jdbcType=VARCHAR},
      </if>
      <if test="appMarket != null" >
        app_market = #{appMarket,jdbcType=VARCHAR},
      </if>
      <if test="deviceSysVersion != null" >
        device_sys_version = #{deviceSysVersion,jdbcType=VARCHAR},
      </if>
      <if test="appVersion != null" >
        app_version = #{appVersion,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.calf.module.statistics.entity.StatTrackerHis" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    update stat_tracker_his
    set guid = #{guid,jdbcType=VARCHAR},
      uid = #{uid,jdbcType=VARCHAR},
      url = #{url,jdbcType=VARCHAR},
      rfu = #{rfu,jdbcType=VARCHAR},
      tp = #{tp,jdbcType=VARCHAR},
      plt = #{plt,jdbcType=VARCHAR},
      page_type_code = #{pageTypeCode,jdbcType=VARCHAR},
      page_id = #{pageId,jdbcType=VARCHAR},
      area_id = #{areaId,jdbcType=VARCHAR},
      area_index = #{areaIndex,jdbcType=VARCHAR},
      track_time = #{trackTime,jdbcType=TIMESTAMP},
      channel_id = #{channelId,jdbcType=VARCHAR},
      lat = #{lat,jdbcType=VARCHAR},
      lng = #{lng,jdbcType=VARCHAR},
      devicetype = #{devicetype,jdbcType=VARCHAR},
      fromIP = #{fromip,jdbcType=VARCHAR},
      app_market = #{appMarket,jdbcType=VARCHAR},
      device_sys_version = #{deviceSysVersion,jdbcType=VARCHAR},
      app_version = #{appVersion,jdbcType=VARCHAR}
    where id = #{id,jdbcType=VARCHAR}
  </update>
  
  
  
</mapper>