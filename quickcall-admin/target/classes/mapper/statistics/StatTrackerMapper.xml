<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="StatTracker" >
  <resultMap id="BaseResultMap" type="com.calf.module.statistics.entity.StatTracker" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    <id column="id" property="id" jdbcType="VARCHAR" />
    <result column="guid" property="guid" jdbcType="VARCHAR" />
    <result column="uid" property="uid" jdbcType="VARCHAR" />
    <result column="url" property="url" jdbcType="VARCHAR" />
    <result column="rfu" property="rfu" jdbcType="VARCHAR" />
    <result column="tp" property="tp" jdbcType="VARCHAR" />
    <result column="plt" property="plt" jdbcType="VARCHAR" />
    <result column="page_type_code" property="pageTypeCode" jdbcType="VARCHAR" />
    <result column="page_id" property="pageId" jdbcType="VARCHAR" />
    <result column="area_id" property="areaId" jdbcType="VARCHAR" />
    <result column="area_index" property="areaIndex" jdbcType="VARCHAR" />
    <result column="track_time" property="trackTime" jdbcType="TIMESTAMP" />
    <result column="channel_id" property="channelId" jdbcType="VARCHAR" />
    <result column="lat" property="lat" jdbcType="VARCHAR" />
    <result column="lng" property="lng" jdbcType="VARCHAR" />
    <result column="devicetype" property="devicetype" jdbcType="VARCHAR" />
    <result column="fromIP" property="fromip" jdbcType="VARCHAR" />
    <result column="app_market" property="appMarket" jdbcType="VARCHAR" />
    <result column="device_sys_version" property="deviceSysVersion" jdbcType="VARCHAR" />
    <result column="app_version" property="appVersion" jdbcType="VARCHAR" />
  </resultMap>

  <resultMap id="CommunityBaseResultMap" type="com.calf.module.statistics.entity.StatTrackerCommunity" >
    <id column="id" property="id" />
    <result property="actualPraiseNum" column="actual_praise_num"/>
    <result property="actualCommentNum" column="actual_comment_num"/>
    <result property="actualSeeNum" column="actual_see_num"/>
    <result property="realSeeNum" column="real_see_num"/>
    <result property="realPraiseNum" column="real_praise_num"/>
    <result property="realCommentNum" column="real_comment_num"/>
    <result property="date" column="date"/>
  </resultMap>

  <resultMap id="StatTrackerResultMap" type="com.calf.module.statistics.entity.CooperationStatistics">
    <result property="productName" column="product_name" />
    <result property="clickCount" column="click_count" />
    <result property="applyCount" column="apply_count" />
    <result property="date" column="date" />
    <result property="productId" column="product_id" />
    <result property="users" column="users" />
    <result property="listCount" column="list_count" />
    <result property="total" column="total" />
    <result property="position" column="position" />
    <result property="postCount" column="post_count" />
    <result property="uid" column="uid" />
    <result property="areaIndex" column="area_index" />
    <result property="pageTypeCode" column="page_type_code" />
    <result property="areaId" column="area_id" />
  </resultMap>


  <resultMap id="ArrondiDetailResultMap" type="ArrondiDetail">
    <result property="phoneNum" column="phone_num" />
    <result property="count" column="count" />
    <result property="date" column="date" />
    <result property="applyCount" column="apply_count" />
    <result property="total" column="total" />
    <result property="listCount" column="list_count" />
  </resultMap>


  <sql id="Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    <where >
      <foreach collection="oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Update_By_Example_Where_Clause" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    <where >
      <foreach collection="example.oredCriteria" item="criteria" separator="or" >
        <if test="criteria.valid" >
          <trim prefix="(" suffix=")" prefixOverrides="and" >
            <foreach collection="criteria.criteria" item="criterion" >
              <choose >
                <when test="criterion.noValue" >
                  and ${criterion.condition}
                </when>
                <when test="criterion.singleValue" >
                  and ${criterion.condition} #{criterion.value}
                </when>
                <when test="criterion.betweenValue" >
                  and ${criterion.condition} #{criterion.value} and #{criterion.secondValue}
                </when>
                <when test="criterion.listValue" >
                  and ${criterion.condition}
                  <foreach collection="criterion.value" item="listItem" open="(" close=")" separator="," >
                    #{listItem}
                  </foreach>
                </when>
              </choose>
            </foreach>
          </trim>
        </if>
      </foreach>
    </where>
  </sql>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    id, guid, uid, url, rfu, tp, plt, page_type_code, page_id, area_id, area_index, track_time, 
    channel_id, lat, lng, devicetype, fromIP, app_market, device_sys_version, app_version
  </sql>



  <!--查询社区点击统计数据-->
  <select id="selectCommunity" resultMap="CommunityBaseResultMap" >
    SELECT
     COUNT(
    CASE
    WHEN a.area_index = 2 THEN
    0
    END
    ) AS actual_see_num,
    COUNT(
    CASE
    WHEN a.area_index = 3 THEN
    0
    END
    ) AS actual_comment_num,
    COUNT(
    CASE
    WHEN a.area_index = 4 THEN
    0
    END
    ) AS actual_praise_num,
    COUNT(distinct uid,
    CASE
    WHEN a.area_index = 2 THEN
    0
    END
    ) AS real_see_num,
    COUNT(distinct uid,
    CASE
    WHEN a.area_index = 3 THEN
    0
    END
    ) AS real_comment_num,
    COUNT(distinct uid,
    CASE
    WHEN a.area_index = 4 THEN
    0
    END
    ) AS real_praise_num,
    DATE_FORMAT(a.track_time, '%Y-%m-%d') AS date
    FROM
    stat_tracker a
    WHERE 1=1
    AND a.area_id = 3
    <![CDATA[ and  a.track_time >= #{sDate} ]]>
    <![CDATA[ and  a.track_time <= #{eDate} ]]>
    GROUP BY DATE_FORMAT(a.track_time, '%Y-%m-%d')
  </select>


  <!--查询平台点击率-->
  <select id="selectStatTracker" resultMap="StatTrackerResultMap" >
    SELECT * FROM ( SELECT
            b.product_name AS product_name,
            b.product_id AS product_id,
            b.sort AS position,
            DATE_FORMAT(
                a.track_time,
                '%Y-%m-%d'
            ) AS date,
            COUNT(DISTINCT a.uid) AS users,
            COUNT(
                CASE
                WHEN a.area_id = 2 THEN
                    0
                END
            ) AS total,
            COUNT(
                CASE
                WHEN (
                    a.area_id = 2
                    AND a.area_index = 1
                ) THEN
                    0
                END
            ) AS apply_count,
            COUNT(
                CASE
                WHEN (
                    a.area_id = 2
                    AND a.area_index = 0
                ) THEN
                    0
                END
            ) AS click_count,
             COUNT(
		        CASE
		        WHEN (
		        a.area_id = 2
		        AND a.area_index = 3
		        ) THEN
		        0
		        END
		        ) AS post_count

        FROM
            `stat_tracker` a
        INNER JOIN product b ON a.page_id = b.product_id
        WHERE 1=1
            <![CDATA[ and  a.track_time >= #{sDate} ]]>
            <![CDATA[ and  a.track_time <= #{eDate} ]]>
            <if test="name != null">
            and b.product_name like concat('%', #{name},'%')
            </if>
        GROUP BY
            DATE_FORMAT(a.track_time, '%Y-%m-%d'),
            a.page_id ) t
          ORDER BY
              t.date DESC, t.click_count  DESC
    LIMIT ${iDisplayStart}, ${iDisplayLength}
  </select>



  <select id="queryListCount"  resultMap="StatTrackerResultMap">
    SELECT
    COUNT(0) as list_count
    FROM
    stat_tracker
    where area_id = 2
    and area_index in(15,16)
    <![CDATA[ and  track_time >= #{sDate} ]]>
    <![CDATA[ and  track_time <= #{eDate} ]]>
    GROUP BY DATE_FORMAT(track_time, '%Y-%m-%d')
  </select>

  <select id="queryCount" parameterType="map" resultType="Integer">
    SELECT
    COUNT(0)
    FROM
    (
    SELECT
    COUNT(a.track_time)
    FROM
    `stat_tracker` a
    INNER JOIN product b ON a.page_id = b.product_id
    WHERE 1=1
    <if test="sDate != null">
      and DATE_FORMAT(a.track_time , '%Y-%m-%d') &gt;=  #{sDate}
    </if>
    <if test="eDate != null">
      and DATE_FORMAT(a.track_time , '%Y-%m-%d') &lt;=  #{eDate}
    </if>
    <if test="name != null">
      and b.product_name like concat('%', #{name},'%')
    </if>
    GROUP BY
    DATE_FORMAT(a.track_time, '%Y-%m-%d'),
    a.page_id
    ) AS c
  </select>


  <select id="queryDetail" parameterType="map" resultMap="ArrondiDetailResultMap">
    SELECT
    a.uid AS phone_num,
    COUNT(
    CASE
    WHEN (a.area_index = 0 OR a.area_index = 1) THEN
    0
    END
    ) AS total,
    COUNT(
    CASE
    WHEN (a.page_type_code = 'xulu://more.guanjia.com') THEN
    0
    END
    ) AS list_count,
    COUNT(
    CASE
    WHEN a.area_index = 0 THEN
    0
    END
    ) AS count,
    COUNT(
    CASE
    WHEN a.area_index = 1 THEN
    0
    END
    ) AS apply_count,
    DATE_FORMAT(
    a.track_time,
    '%Y-%m-%d %H:%i:%s'
    ) AS date
    FROM
    `stat_tracker` a
    WHERE 1=1
    and  a.area_id =  2
    <if test="id != null">
      and  a.page_id =  #{id}
    </if>
    <if test="date != null">
      and DATE_FORMAT(a.track_time , '%Y-%m-%d') = #{date}
    </if>
    GROUP BY
    a.uid
    ORDER BY total DESC
  </select>


  
  
  
  <select id="selectByExample" resultMap="BaseResultMap" parameterType="com.calf.module.statistics.entity.StatTracker" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    select
    <if test="distinct" >
      distinct
    </if>
    <include refid="Base_Column_List" />
    from stat_tracker_his
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
    <if test="orderByClause != null" >
      order by ${orderByClause}
    </if>
  </select>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from stat_tracker_his
    where id = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    delete from stat_tracker_his
    where id = #{id,jdbcType=VARCHAR}
  </delete>
  <delete id="deleteByExample" parameterType="com.calf.module.statistics.entity.StatTracker" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    delete from stat_tracker_his
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </delete>
  <insert id="insert" parameterType="com.calf.module.statistics.entity.StatTracker" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    insert into stat_tracker_his (id, guid, uid, 
      url, rfu, tp, plt, 
      page_type_code, page_id, area_id, 
      area_index, track_time, channel_id, 
      lat, lng, devicetype, 
      fromIP, app_market, device_sys_version, 
      app_version)
    values (#{id,jdbcType=VARCHAR}, #{guid,jdbcType=VARCHAR}, #{uid,jdbcType=VARCHAR}, 
      #{url,jdbcType=VARCHAR}, #{rfu,jdbcType=VARCHAR}, #{tp,jdbcType=VARCHAR}, #{plt,jdbcType=VARCHAR}, 
      #{pageTypeCode,jdbcType=VARCHAR}, #{pageId,jdbcType=VARCHAR}, #{areaId,jdbcType=VARCHAR}, 
      #{areaIndex,jdbcType=VARCHAR}, #{trackTime,jdbcType=TIMESTAMP}, #{channelId,jdbcType=VARCHAR}, 
      #{lat,jdbcType=VARCHAR}, #{lng,jdbcType=VARCHAR}, #{devicetype,jdbcType=VARCHAR}, 
      #{fromip,jdbcType=VARCHAR}, #{appMarket,jdbcType=VARCHAR}, #{deviceSysVersion,jdbcType=VARCHAR}, 
      #{appVersion,jdbcType=VARCHAR})
  </insert>
  
  <insert id="importData" parameterType="com.calf.module.statistics.entity.StatTracker" >
  INSERT into `stat_tracker_his`  SELECT * FROM `stat_tracker`
   WHERE TO_DAYS( NOW( ) ) - TO_DAYS(track_time) = 1 ;
 
  </insert>
  
  
   <delete id="deleteData" parameterType="map">
   delete from stat_tracker where TO_DAYS( NOW( ) ) - TO_DAYS(track_time) >=7  ORDER BY id LIMIT  1000;

  </delete> 
  <select id="queryCountTwo" parameterType="map" resultType="int">
  select count(*) from `stat_tracker`  WHERE TO_DAYS( NOW( ) ) - TO_DAYS(track_time) >= 7 
  </select>
  
  
  <insert id="insertSelective" parameterType="com.calf.module.statistics.entity.StatTracker" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    insert into stat_tracker_his
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="guid != null" >
        guid,
      </if>
      <if test="uid != null" >
        uid,
      </if>
      <if test="url != null" >
        url,
      </if>
      <if test="rfu != null" >
        rfu,
      </if>
      <if test="tp != null" >
        tp,
      </if>
      <if test="plt != null" >
        plt,
      </if>
      <if test="pageTypeCode != null" >
        page_type_code,
      </if>
      <if test="pageId != null" >
        page_id,
      </if>
      <if test="areaId != null" >
        area_id,
      </if>
      <if test="areaIndex != null" >
        area_index,
      </if>
      <if test="trackTime != null" >
        track_time,
      </if>
      <if test="channelId != null" >
        channel_id,
      </if>
      <if test="lat != null" >
        lat,
      </if>
      <if test="lng != null" >
        lng,
      </if>
      <if test="devicetype != null" >
        devicetype,
      </if>
      <if test="fromip != null" >
        fromIP,
      </if>
      <if test="appMarket != null" >
        app_market,
      </if>
      <if test="deviceSysVersion != null" >
        device_sys_version,
      </if>
      <if test="appVersion != null" >
        app_version,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="guid != null" >
        #{guid,jdbcType=VARCHAR},
      </if>
      <if test="uid != null" >
        #{uid,jdbcType=VARCHAR},
      </if>
      <if test="url != null" >
        #{url,jdbcType=VARCHAR},
      </if>
      <if test="rfu != null" >
        #{rfu,jdbcType=VARCHAR},
      </if>
      <if test="tp != null" >
        #{tp,jdbcType=VARCHAR},
      </if>
      <if test="plt != null" >
        #{plt,jdbcType=VARCHAR},
      </if>
      <if test="pageTypeCode != null" >
        #{pageTypeCode,jdbcType=VARCHAR},
      </if>
      <if test="pageId != null" >
        #{pageId,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null" >
        #{areaId,jdbcType=VARCHAR},
      </if>
      <if test="areaIndex != null" >
        #{areaIndex,jdbcType=VARCHAR},
      </if>
      <if test="trackTime != null" >
        #{trackTime,jdbcType=TIMESTAMP},
      </if>
      <if test="channelId != null" >
        #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="lat != null" >
        #{lat,jdbcType=VARCHAR},
      </if>
      <if test="lng != null" >
        #{lng,jdbcType=VARCHAR},
      </if>
      <if test="devicetype != null" >
        #{devicetype,jdbcType=VARCHAR},
      </if>
      <if test="fromip != null" >
        #{fromip,jdbcType=VARCHAR},
      </if>
      <if test="appMarket != null" >
        #{appMarket,jdbcType=VARCHAR},
      </if>
      <if test="deviceSysVersion != null" >
        #{deviceSysVersion,jdbcType=VARCHAR},
      </if>
      <if test="appVersion != null" >
        #{appVersion,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <select id="countByExample" parameterType="com.calf.module.statistics.entity.StatTracker" resultType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    select count(*) from stat_tracker_his
    <if test="_parameter != null" >
      <include refid="Example_Where_Clause" />
    </if>
  </select>
  <update id="updateByExampleSelective" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    update stat_tracker_his
    <set >
      <if test="record.id != null" >
        id = #{record.id,jdbcType=VARCHAR},
      </if>
      <if test="record.guid != null" >
        guid = #{record.guid,jdbcType=VARCHAR},
      </if>
      <if test="record.uid != null" >
        uid = #{record.uid,jdbcType=VARCHAR},
      </if>
      <if test="record.url != null" >
        url = #{record.url,jdbcType=VARCHAR},
      </if>
      <if test="record.rfu != null" >
        rfu = #{record.rfu,jdbcType=VARCHAR},
      </if>
      <if test="record.tp != null" >
        tp = #{record.tp,jdbcType=VARCHAR},
      </if>
      <if test="record.plt != null" >
        plt = #{record.plt,jdbcType=VARCHAR},
      </if>
      <if test="record.pageTypeCode != null" >
        page_type_code = #{record.pageTypeCode,jdbcType=VARCHAR},
      </if>
      <if test="record.pageId != null" >
        page_id = #{record.pageId,jdbcType=VARCHAR},
      </if>
      <if test="record.areaId != null" >
        area_id = #{record.areaId,jdbcType=VARCHAR},
      </if>
      <if test="record.areaIndex != null" >
        area_index = #{record.areaIndex,jdbcType=VARCHAR},
      </if>
      <if test="record.trackTime != null" >
        track_time = #{record.trackTime,jdbcType=TIMESTAMP},
      </if>
      <if test="record.channelId != null" >
        channel_id = #{record.channelId,jdbcType=VARCHAR},
      </if>
      <if test="record.lat != null" >
        lat = #{record.lat,jdbcType=VARCHAR},
      </if>
      <if test="record.lng != null" >
        lng = #{record.lng,jdbcType=VARCHAR},
      </if>
      <if test="record.devicetype != null" >
        devicetype = #{record.devicetype,jdbcType=VARCHAR},
      </if>
      <if test="record.fromip != null" >
        fromIP = #{record.fromip,jdbcType=VARCHAR},
      </if>
      <if test="record.appMarket != null" >
        app_market = #{record.appMarket,jdbcType=VARCHAR},
      </if>
      <if test="record.deviceSysVersion != null" >
        device_sys_version = #{record.deviceSysVersion,jdbcType=VARCHAR},
      </if>
      <if test="record.appVersion != null" >
        app_version = #{record.appVersion,jdbcType=VARCHAR},
      </if>
    </set>
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByExample" parameterType="map" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    update stat_tracker_his
    set id = #{record.id,jdbcType=VARCHAR},
      guid = #{record.guid,jdbcType=VARCHAR},
      uid = #{record.uid,jdbcType=VARCHAR},
      url = #{record.url,jdbcType=VARCHAR},
      rfu = #{record.rfu,jdbcType=VARCHAR},
      tp = #{record.tp,jdbcType=VARCHAR},
      plt = #{record.plt,jdbcType=VARCHAR},
      page_type_code = #{record.pageTypeCode,jdbcType=VARCHAR},
      page_id = #{record.pageId,jdbcType=VARCHAR},
      area_id = #{record.areaId,jdbcType=VARCHAR},
      area_index = #{record.areaIndex,jdbcType=VARCHAR},
      track_time = #{record.trackTime,jdbcType=TIMESTAMP},
      channel_id = #{record.channelId,jdbcType=VARCHAR},
      lat = #{record.lat,jdbcType=VARCHAR},
      lng = #{record.lng,jdbcType=VARCHAR},
      devicetype = #{record.devicetype,jdbcType=VARCHAR},
      fromIP = #{record.fromip,jdbcType=VARCHAR},
      app_market = #{record.appMarket,jdbcType=VARCHAR},
      device_sys_version = #{record.deviceSysVersion,jdbcType=VARCHAR},
      app_version = #{record.appVersion,jdbcType=VARCHAR}
    <if test="_parameter != null" >
      <include refid="Update_By_Example_Where_Clause" />
    </if>
  </update>
  <update id="updateByPrimaryKeySelective" parameterType="com.calf.module.statistics.entity.StatTracker" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    update stat_tracker_his
    <set >
      <if test="guid != null" >
        guid = #{guid,jdbcType=VARCHAR},
      </if>
      <if test="uid != null" >
        uid = #{uid,jdbcType=VARCHAR},
      </if>
      <if test="url != null" >
        url = #{url,jdbcType=VARCHAR},
      </if>
      <if test="rfu != null" >
        rfu = #{rfu,jdbcType=VARCHAR},
      </if>
      <if test="tp != null" >
        tp = #{tp,jdbcType=VARCHAR},
      </if>
      <if test="plt != null" >
        plt = #{plt,jdbcType=VARCHAR},
      </if>
      <if test="pageTypeCode != null" >
        page_type_code = #{pageTypeCode,jdbcType=VARCHAR},
      </if>
      <if test="pageId != null" >
        page_id = #{pageId,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null" >
        area_id = #{areaId,jdbcType=VARCHAR},
      </if>
      <if test="areaIndex != null" >
        area_index = #{areaIndex,jdbcType=VARCHAR},
      </if>
      <if test="trackTime != null" >
        track_time = #{trackTime,jdbcType=TIMESTAMP},
      </if>
      <if test="channelId != null" >
        channel_id = #{channelId,jdbcType=VARCHAR},
      </if>
      <if test="lat != null" >
        lat = #{lat,jdbcType=VARCHAR},
      </if>
      <if test="lng != null" >
        lng = #{lng,jdbcType=VARCHAR},
      </if>
      <if test="devicetype != null" >
        devicetype = #{devicetype,jdbcType=VARCHAR},
      </if>
      <if test="fromip != null" >
        fromIP = #{fromip,jdbcType=VARCHAR},
      </if>
      <if test="appMarket != null" >
        app_market = #{appMarket,jdbcType=VARCHAR},
      </if>
      <if test="deviceSysVersion != null" >
        device_sys_version = #{deviceSysVersion,jdbcType=VARCHAR},
      </if>
      <if test="appVersion != null" >
        app_version = #{appVersion,jdbcType=VARCHAR},
      </if>
    </set>
    where id = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.calf.module.statistics.entity.StatTracker" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Aug 02 14:38:18 CST 2017.
    -->
    update stat_tracker_his
    set guid = #{guid,jdbcType=VARCHAR},
      uid = #{uid,jdbcType=VARCHAR},
      url = #{url,jdbcType=VARCHAR},
      rfu = #{rfu,jdbcType=VARCHAR},
      tp = #{tp,jdbcType=VARCHAR},
      plt = #{plt,jdbcType=VARCHAR},
      page_type_code = #{pageTypeCode,jdbcType=VARCHAR},
      page_id = #{pageId,jdbcType=VARCHAR},
      area_id = #{areaId,jdbcType=VARCHAR},
      area_index = #{areaIndex,jdbcType=VARCHAR},
      track_time = #{trackTime,jdbcType=TIMESTAMP},
      channel_id = #{channelId,jdbcType=VARCHAR},
      lat = #{lat,jdbcType=VARCHAR},
      lng = #{lng,jdbcType=VARCHAR},
      devicetype = #{devicetype,jdbcType=VARCHAR},
      fromIP = #{fromip,jdbcType=VARCHAR},
      app_market = #{appMarket,jdbcType=VARCHAR},
      device_sys_version = #{deviceSysVersion,jdbcType=VARCHAR},
      app_version = #{appVersion,jdbcType=VARCHAR}
    where id = #{id,jdbcType=VARCHAR}
  </update>
  
  
  
</mapper>