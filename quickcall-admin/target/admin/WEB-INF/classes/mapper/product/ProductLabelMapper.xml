<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="ProductLabel">
	<resultMap id="BaseResultMap" type="com.calf.module.product.entity.ProductLabel">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Apr 25 
			15:51:08 CST 2017. -->
		<id column="product_label_id" property="productLabelId" jdbcType="VARCHAR" />
		<result column="product_category_id" property="productCategoryId"
			jdbcType="VARCHAR" />
			<result column="label_category_id" property="labelCategoryId"
			jdbcType="VARCHAR" />
		<result column="label_name" property="labelName" jdbcType="VARCHAR" />
		<result column="label_code" property="labelCode" jdbcType="VARCHAR" />
		<result column="state" property="state" jdbcType="INTEGER" />
		<result column="parent_id" property="parentId" jdbcType="VARCHAR" />
		<result column="label_lcolor" property="labelLcolor" jdbcType="VARCHAR" />
		<result column="label_font_size" property="labelFontSize"
			jdbcType="VARCHAR" />
		<result column="label_background_img" property="labelBackgroundImg"
			jdbcType="VARCHAR" />
		<result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
		<result column="create_man" property="createMan" jdbcType="VARCHAR" />
		<result column="modify_time" property="modifyTime" jdbcType="TIMESTAMP" />
		<result column="modify_man" property="modifyMan" jdbcType="VARCHAR" />
		<result column="remark" property="remark" jdbcType="VARCHAR" />
		<result column="weight" property="weight" jdbcType="INTEGER" />
	</resultMap>


	<resultMap id="BaseCusInfoResultMap"
		type="com.calf.module.userlabel.entity.CustomerLebalInfoVo">
		<id column="product_label_id" property="productLabelId" jdbcType="VARCHAR" />
		<result column="accountId" property="accountId" jdbcType="VARCHAR" />
		<result column="name" property="name" jdbcType="VARCHAR" />
		<result column="phoneNum" property="phoneNum" jdbcType="VARCHAR" />
		<result column="idCode" property="idCode" jdbcType="VARCHAR" />
		<result column="region" property="region" jdbcType="VARCHAR" />
		<result column="customerLebalName" property="customerLebalName"
			jdbcType="VARCHAR" />
		<result column="tjTime" property="tjTime" jdbcType="VARCHAR" />
		<result column="tjZoneName" property="tjZoneName" jdbcType="VARCHAR" />
		<result column="platformBackState" property="platformBackState"
			jdbcType="VARCHAR" />
	</resultMap>



	<sql id="Base_Column_List">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Apr 25 
			15:51:08 CST 2017. -->
		product_label_id, product_category_id, label_name, label_code, state,
		parent_id, label_lcolor,
		label_font_size, label_background_img, create_time, create_man, modify_time,
		modify_man,remark,label_category_id,weight
	</sql>

	<select id="get" parameterType="map" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_label
		WHERE product_label_id = #{arg0}
	</select>

	<select id="queryCount" parameterType="map" resultType="int">
		select count(product_label_id) from product_label where 1=1
		<if test="labelName !=null"> and (label_name like concat('%',#{labelName},'%'))</if>
		<if test="labelCode !=null"> and label_code = #{labelCode}</if>
		<if test="parentId !=null"> and parent_id = #{parentId}</if>
		<if test="state !=null"> and state = #{state}</if>
	</select>


	<select id="queryCountExist" parameterType="map" resultType="int">
		select count(1) from product_label where 1=1
		<if test="labelName !=null"> and label_name = #{labelName}</if>
		<if test="labelCode !=null"> and label_code = #{labelCode}</if>
	</select>
	<select id="query" parameterType="map" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_label where 1=1 
		<if test="labelName !=null"> and label_name like concat('%',#{labelName},'%')</if>
		<if test="labelCode !=null"> and label_code = #{labelCode}</if>
		<if test="parentId !=null"> and parent_id = #{parentId}</if>
		<if test="state !=null"> and state = #{state}</if>
		<if test="orderStr !=null"> order by #{orderStr}</if>
		limit ${iDisplayStart},${iDisplayLength}
	</select>

	<select id="queryAll" parameterType="map" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_label where 1=1
		<if test="labelName !=null"> and label_name like concat('%',#{labelName},'%')</if>
		<if test="labelCode !=null"> and label_code = #{labelCode}</if>
		<if test="parentId !=null"> and parent_id = #{parentId}</if>
		<if test="state !=null"> and state = #{state}</if>
	</select>
	
	<select id="queryInOpinionFeedback" parameterType="map" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_label where parent_id =#{parentId}
		   and state=1 ORDER BY parent_id DESC
	</select>

	<select id="queryList" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_label where 1=1
	</select>

	<sql id="Example_Where_Clause">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Apr 25 
			15:51:08 CST 2017. -->
		<where>
			<foreach collection="oredCriteria" item="criteria" separator="or">
				<if test="criteria.valid">
					<trim prefix="(" suffix=")" prefixOverrides="and">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value} and
									#{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach collection="criterion.value" item="listItem"
										open="(" close=")" separator=",">
										#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>
	<sql id="Update_By_Example_Where_Clause">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Apr 25 
			15:51:08 CST 2017. -->
		<where>
			<foreach collection="example.oredCriteria" item="criteria"
				separator="or">
				<if test="criteria.valid">
					<trim prefix="(" suffix=")" prefixOverrides="and">
						<foreach collection="criteria.criteria" item="criterion">
							<choose>
								<when test="criterion.noValue">
									and ${criterion.condition}
								</when>
								<when test="criterion.singleValue">
									and ${criterion.condition} #{criterion.value}
								</when>
								<when test="criterion.betweenValue">
									and ${criterion.condition} #{criterion.value} and
									#{criterion.secondValue}
								</when>
								<when test="criterion.listValue">
									and ${criterion.condition}
									<foreach collection="criterion.value" item="listItem"
										open="(" close=")" separator=",">
										#{listItem}
									</foreach>
								</when>
							</choose>
						</foreach>
					</trim>
				</if>
			</foreach>
		</where>
	</sql>

	<select id="selectByPrimaryKey" resultMap="BaseResultMap"
		parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Apr 25 
			15:51:08 CST 2017. -->
		select
		<include refid="Base_Column_List" />
		from product_label
		where product_label_id = #{productLabelId,jdbcType=VARCHAR}
	</select>

	<delete id="delete" parameterType="map">
		DELETE FROM product_label
		WHERE
		product_label_id = #{arg0}
	</delete>

	<delete id="deleteByPrimaryKey" parameterType="java.lang.String">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Apr 25 
			15:51:08 CST 2017. -->
		delete from product_label
		where product_label_id = #{productLabelId,jdbcType=VARCHAR}
	</delete>

	<insert id="insert" parameterType="com.calf.module.product.entity.ProductLabel">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Apr 25 
			15:51:08 CST 2017. -->
		insert into product_label (product_label_id, product_category_id,
		label_name,
		label_code, state, parent_id,
		label_lcolor, label_font_size, label_background_img,
		create_time, create_man, modify_time,
		modify_man,remark,label_category_id,weight)
		values (#{productLabelId,jdbcType=VARCHAR},
		#{productCategoryId,jdbcType=CHAR}, #{labelName,jdbcType=VARCHAR},
		#{labelCode,jdbcType=VARCHAR}, #{state,jdbcType=INTEGER},
		#{parentId,jdbcType=VARCHAR},
		#{labelLcolor,jdbcType=VARCHAR}, #{labelFontSize,jdbcType=VARCHAR},
		#{labelBackgroundImg,jdbcType=VARCHAR},
		#{createTime,jdbcType=TIMESTAMP}, #{createMan,jdbcType=VARCHAR},
		#{modifyTime,jdbcType=TIMESTAMP},
		#{modifyMan,jdbcType=VARCHAR},#{remark,jdbcType=VARCHAR},#{labelCategoryId,jdbcType=VARCHAR},#{weight,jdbcType=INTEGER}
		)
	</insert>
	<insert id="insertSelective" parameterType="com.calf.module.product.entity.ProductLabel">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Apr 25 
			15:51:08 CST 2017. -->
		insert into product_label
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<if test="productLabelId != null">
				product_label_id,
			</if>
			<if test="labelCategoryId != null">
				product_category_id,
			</if>
			<if test="labelName != null">
				label_name,
			</if>
			<if test="labelCode != null">
				label_code,
			</if>
			<if test="state != null">
				state,
			</if>
			<if test="parentId != null">
				parent_id,
			</if>
			<if test="labelLcolor != null">
				label_lcolor,
			</if>
			<if test="labelFontSize != null">
				label_font_size,
			</if>
			<if test="labelBackgroundImg != null">
				label_background_img,
			</if>
			<if test="createTime != null">
				create_time,
			</if>
			<if test="createMan != null">
				create_man,
			</if>
			<if test="modifyTime != null">
				modify_time,
			</if>
			<if test="modifyMan != null">
				modify_man,
			</if>
		</trim>
		<trim prefix="values (" suffix=")" suffixOverrides=",">
			<if test="productLabelId != null">
				#{productLabelId,jdbcType=VARCHAR},
			</if>
			<if test="labelCategoryId != null">
				#{labelCategoryId,jdbcType=VARCHAR},
			</if>
			<if test="labelName != null">
				#{labelName,jdbcType=VARCHAR},
			</if>
			<if test="labelCode != null">
				#{labelCode,jdbcType=VARCHAR},
			</if>
			<if test="state != null">
				#{state,jdbcType=INTEGER},
			</if>
			<if test="parentId != null">
				#{parentId,jdbcType=VARCHAR},
			</if>
			<if test="labelLcolor != null">
				#{labelLcolor,jdbcType=VARCHAR},
			</if>
			<if test="labelFontSize != null">
				#{labelFontSize,jdbcType=VARCHAR},
			</if>
			<if test="labelBackgroundImg != null">
				#{labelBackgroundImg,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				#{createTime,jdbcType=TIMESTAMP},
			</if>
			<if test="createMan != null">
				#{createMan,jdbcType=VARCHAR},
			</if>
			<if test="modifyTime != null">
				#{modifyTime,jdbcType=TIMESTAMP},
			</if>
			<if test="modifyMan != null">
				#{modifyMan,jdbcType=VARCHAR},
			</if>
		</trim>
	</insert>

	<update id="update" parameterType="map">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Apr 25 
			15:51:08 CST 2017. -->
		update product_label
		<set>
			product_label_id = #{productLabelId},
			product_category_id = #{productCategoryId},
			label_name = #{labelName},
			label_code = #{labelCode},
			state = #{state},
			parent_id = #{parentId},
			label_lcolor = #{labelLcolor},
			label_font_size = #{labelFontSize},
			label_background_img = #{labelBackgroundImg},
			create_time = #{createTime},
			create_man = #{createMan},
			modify_time = #{modifyTime,jdbcType=TIMESTAMP},
			modify_man = #{modifyMan},
			remark= #{remark},
			label_category_id= #{labelCategoryId},
			weight = #{weight}
		</set>
		WHERE product_label_id = #{productLabelId}
	</update>

	<update id="updateByExample" parameterType="map">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Apr 25 
			15:51:08 CST 2017. -->
		update product_label
		set product_label_id = #{record.productLabelId,jdbcType=VARCHAR},
		product_category_id = #{record.labelCategoryId,jdbcType=CHAR},
		label_name = #{record.labelName,jdbcType=VARCHAR},
		label_code = #{record.labelCode,jdbcType=VARCHAR},
		state = #{record.state,jdbcType=INTEGER},
		parent_id = #{record.parentId,jdbcType=VARCHAR},
		label_lcolor = #{record.labelLcolor,jdbcType=VARCHAR},
		label_font_size = #{record.labelFontSize,jdbcType=VARCHAR},
		label_background_img = #{record.labelBackgroundImg,jdbcType=VARCHAR},
		create_time = #{record.createTime,jdbcType=TIMESTAMP},
		create_man = #{record.createMan,jdbcType=VARCHAR},
		modify_time = #{record.modifyTime,jdbcType=TIMESTAMP},
		modify_man = #{record.modifyMan,jdbcType=VARCHAR}
		<if test="_parameter != null">
			<include refid="Update_By_Example_Where_Clause" />
		</if>
	</update>
	<update id="updateByPrimaryKeySelective" parameterType="com.calf.module.product.entity.ProductLabel">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Apr 25 
			15:51:08 CST 2017. -->
		update product_label
		<set>
			<if test="labelCategoryId != null">
				product_category_id = #{labelCategoryId,jdbcType=CHAR},
			</if>
			<if test="labelName != null">
				label_name = #{labelName,jdbcType=VARCHAR},
			</if>
			<if test="labelCode != null">
				label_code = #{labelCode,jdbcType=VARCHAR},
			</if>
			<if test="state != null">
				state = #{state,jdbcType=INTEGER},
			</if>
			<if test="parentId != null">
				parent_id = #{parentId,jdbcType=VARCHAR},
			</if>
			<if test="labelLcolor != null">
				label_lcolor = #{labelLcolor,jdbcType=VARCHAR},
			</if>
			<if test="labelFontSize != null">
				label_font_size = #{labelFontSize,jdbcType=VARCHAR},
			</if>
			<if test="labelBackgroundImg != null">
				label_background_img = #{labelBackgroundImg,jdbcType=VARCHAR},
			</if>
			<if test="createTime != null">
				create_time = #{createTime,jdbcType=TIMESTAMP},
			</if>
			<if test="createMan != null">
				create_man = #{createMan,jdbcType=VARCHAR},
			</if>
			<if test="modifyTime != null">
				modify_time = #{modifyTime,jdbcType=TIMESTAMP},
			</if>
			<if test="modifyMan != null">
				modify_man = #{modifyMan,jdbcType=VARCHAR},
			</if>
		</set>
		where product_label_id = #{productLabelId,jdbcType=VARCHAR}
	</update>
	<update id="updateByPrimaryKey" parameterType="com.calf.module.product.entity.ProductLabel">
		<!-- WARNING - @mbggenerated This element is automatically generated by 
			MyBatis Generator, do not modify. This element was generated on Tue Apr 25 
			15:51:08 CST 2017. -->
		update product_label
		set product_category_id = #{labelCategoryId,jdbcType=CHAR},
		label_name = #{labelName,jdbcType=VARCHAR},
		label_code = #{labelCode,jdbcType=VARCHAR},
		state = #{state,jdbcType=INTEGER},
		parent_id = #{parentId,jdbcType=VARCHAR},
		label_lcolor = #{labelLcolor,jdbcType=VARCHAR},
		label_font_size = #{labelFontSize,jdbcType=VARCHAR},
		label_background_img = #{labelBackgroundImg,jdbcType=VARCHAR},
		create_time = #{createTime,jdbcType=TIMESTAMP},
		create_man = #{createMan,jdbcType=VARCHAR},
		modify_time = #{modifyTime,jdbcType=TIMESTAMP},
		modify_man = #{modifyMan,jdbcType=VARCHAR}
		where product_label_id = #{productLabelId,jdbcType=VARCHAR}
	</update>

	<select id="queryLabelInfo" resultMap="BaseResultMap">
		SELECT
		b.product_label_id,
		b.label_name,
		b.label_code,
		b.remark,
		b.create_man,
		b.create_time,
		b.state
		FROM
		label_category a
		INNER JOIN
		product_label b ON a.label_category_id = b.label_category_id
		AND
		a.state = 1
		AND a.category_code = 'User_Label'
		where 1=1
		<if test="labelName !=null"> and b.label_name like concat('%',#{labelName},'%')</if>
		<if test="labelCode !=null"> and b.label_code = #{labelCode}</if>
		<if test="state !=null"> and b.state = #{state}</if>
	</select>
	<select id="queryLabelUserInfo" resultMap="BaseResultMap">
			SELECT
		b.product_label_id, b.product_category_id, b.label_name, b.label_code, b.state,
		b.parent_id, b.label_lcolor, b.label_category_id,
		b.label_font_size, b.label_background_img, b.create_time, b.create_man, b.modify_time,
		b.modify_man,b.remark
		FROM
		label_category a
		INNER JOIN product_label b ON
		a.label_category_id = b.label_category_id
		AND a.state = 1
		AND
		a.category_code = 'Product_Lable' 
		where 1=1  
		<if test="labelName !=null"> and b.label_name like concat('%',#{labelName},'%')</if>
		<if test="labelCode !=null"> and b.label_code = #{labelCode}</if>
		<if test="parentId !=null"> and b.parent_id = #{parentId}</if>
		<if test="state !=null"> and b.state = #{state}</if>
	</select>
	<select id="queryCountInfo" resultType="int">
		SELECT
		count(1)
		FROM
		label_category a
		INNER JOIN product_label b ON
		a.label_category_id = b.label_category_id
		AND a.state = 1
		AND
		a.category_code = 'User_Label'
		where 1=1
		<if test="labelName !=null"> and b.label_name like concat('%',#{labelName},'%')</if>
		<if test="labelCode !=null"> and b.label_code = #{labelCode}</if>
		<if test="state !=null"> and b.state = #{state}</if>
	</select>


	<select id="queryCusLabelInfo" resultMap="BaseCusInfoResultMap">
		select * from
		customer_label_info
		where 1=1

		<if test="accountId !=null and accountId !='' "> and accountId =#{accountId}</if>
		<if test="idCode !=null and idCode !='' "> and idCode =#{idCode}</if>
		<if test="phoneNum !=null and phoneNum !='' "> and phoneNum =#{phoneNum}</if>
		<if test="region !=null and region !='' "> and region = #{region}</if>
		<if test="customerLebalName !=null  and customerLebalName !='' "> and customerLebalName = #{customerLebalName}</if>
		<if test="state !=null and state !=''  "> and state = #{state}</if>
	</select>

	<select id="queryCusCountInfo" resultType="int">
		SELECT
		count(1)
		FROM
		customer_label_info
		where 1=1
		<if test="accountId !=null and accountId !='' "> and accountId =#{accountId}</if>
		<if test="idCode !=null and idCode !='' "> and idCode =#{idCode}</if>
		<if test="phoneNum !=null and phoneNum !='' "> and phoneNum =#{phoneNum}</if>
		<if test="region !=null and region !='' "> and region = #{region}</if>
		<if test="customerLebalName !=null  and customerLebalName !='' "> and customerLebalName = #{customerLebalName}</if>
		<if test="state !=null and state !=''  "> and state = #{state}</if>
	</select>

</mapper>