<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ProductCategory">
 <resultMap id="BaseResultMap" type="com.calf.module.product.entity.ProductCategory" >
     <id column="product_category_id" property="productCategoryId" jdbcType="VARCHAR" />
    <result column="state" property="state" jdbcType="INTEGER" />
    <result column="category_name" property="categoryName" jdbcType="VARCHAR" />
    <result column="image_url" property="imageUrl" jdbcType="VARCHAR" />
    <result column="introduction" property="introduction" jdbcType="VARCHAR" />
    <result column="sort" property="sort" jdbcType="INTEGER" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="create_man" property="createMan" jdbcType="VARCHAR" />
    <result column="modify_time" property="modifyTime" jdbcType="TIMESTAMP" />
    <result column="modify_man" property="modifyMan" jdbcType="VARCHAR" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="parent_id" property="parentId" jdbcType="VARCHAR" />
    
  </resultMap>
  
    <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Mar 31 18:40:52 CST 2017.
    -->
    product_category_id, state, category_name, image_url, introduction, sort, create_time, 
    create_man, modify_time, modify_man, remark, parent_id
  </sql>
  
  
	<select id="get" parameterType="map" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_category where product_category_id = #{arg0}
	</select>
  
   <sql id="queryConditon">
   <if test="state !=null"> and state = #{state}</if>
   <if test="categoryName !=null"> and category_name like CONCAT('%',#{categoryName},'%')</if>
   </sql>
  
  
  <select id="queryCount" parameterType="map" resultType="int">
		select count(product_category_id) from product_category where 1=1
		<include refid="queryConditon" />
	</select>
	
  <select id="query" parameterType="map" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from
		product_category where 1=1
		<include refid="queryConditon" />
		 order by create_time desc
		limit ${iDisplayStart},${iDisplayLength}
	</select>
  
  <select id="queryList" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_category where state=1
	</select>
	
	<!-- 增加 -->
	<insert id="insert" parameterType="map">
		INSERT INTO product_category
		( product_category_id, state, category_name, image_url, introduction, sort, create_time, 
         create_man, modify_time, modify_man, remark, parent_id)
		VALUES
		(
		 #{productCategoryId}, #{state}, #{categoryName}, #{imageUrl}, #{introduction}, #{sort}, #{createTime}, 
         #{createMan}, #{modifyTime}, #{modifyMan}, #{remark}, #{parentId}
		)
	</insert>

	<delete id="delete" parameterType="map">
		DELETE FROM product_category
		WHERE product_category_id = #{arg0}
	</delete>

	<select id="getProductCategoryById" parameterType="map" resultMap="BaseResultMap">
		SELECT
		<include refid="Base_Column_List" />
		FROM product_category
		WHERE product_category_id = #{arg0}
	</select>

	<update id="update" parameterType="map">
		UPDATE product_category
		<set>
			<if test="state!=null">															
			state =   #{state}, 
			</if>
			<if test="categoryName!=null and categoryName!=''">
			category_name = #{categoryName},
			</if>
			<if test="imageUrl!=null and imageUrl!=''">
			image_url =#{imageUrl},
			</if>
			<if test="introduction!=null and introduction!=''">
			introduction =  #{introduction},
			</if>
			<if test="sort!=null and sort!=''">
			sort =  #{sort},
			</if>
			<if test="remark!=null and remark!=''">
			remark = #{remark},
			</if>
			<if test="parentId!=null and parentId!=''">
			parent_id =  #{parentId},
			</if>
        </set>
		WHERE product_category_id = #{productCategoryId}
	</update>
  
  
  
    <select id="queryOneList" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_category where state=1  and category_name = #{categoryName}
	</select>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
</mapper>